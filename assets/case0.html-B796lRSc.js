import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,d as a,o as t}from"./app-qOQMBkXC.js";const n="/Ascend310/assets/aipro-zI2Y0M66.png",l="/Ascend310/assets/4-CQC4WgEA.png",p="/Ascend310/assets/5-CYMh7CrH.png",r="/Ascend310/assets/1-BcaoogQx.png",d="/Ascend310/assets/2-TdGezcyy.png",h="/Ascend310/assets/3-BtL3KDA9.png",c="/Ascend310/assets/tf-BhEpGq3g.jpg",o="/Ascend310/assets/reader-DMPPZik2.jpg",g="/Ascend310/assets/hdmi-BuhkPfih.jpg",m="/Ascend310/assets/minihdmi-BW_mUA7o.jpg",k="/Ascend310/assets/power-MecOdXud.png",u="/Ascend310/assets/mouse-BP5LgYNe.png",b="/Ascend310/assets/cover-CPxq2wJ7.png",_="/Ascend310/assets/fan-DfaUnUWD.png",A="/Ascend310/assets/otg-DQQF5Mbo.png",v="/Ascend310/assets/nvme-bO0f-k6t.png",F="/Ascend310/assets/ngff-4Q1My_lh.png",y="/Ascend310/assets/emmc1-CGzG5aio.png",f="/Ascend310/assets/emmc2-DqD6g6rt.png",I="/Ascend310/assets/camera-SMlB7lS6.png",S="/Ascend310/assets/cable-D_0BjbfW.png",M="/Ascend310/assets/csi-CDCeQWts.png",C="/Ascend310/assets/dsi-CEsrKo83.png",D="/Ascend310/assets/microusb-CvMOUXxF.png",x="/Ascend310/assets/%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81-BIOuMGFz.png",P="/Ascend310/assets/%E5%AE%98%E6%96%B9%E9%95%9C%E5%83%8F-CssCGpDm.png",B="/Ascend310/assets/download_ubuntu-CX3NKF6A.png",U="/Ascend310/assets/copyandjump-AiSDYLtq.png",T="/Ascend310/assets/folder-BlBvmw5s.png",O="/Ascend310/assets/chooseubuntu-C-467UVx.png",E="/Ascend310/assets/download_openeuler-BXdhWVgy.png",w="/Ascend310/assets/cpjp-DDKrudUY.png",G="/Ascend310/assets/folderr-jGl7hgK4.png",H="/Ascend310/assets/chooseeuler-Dr87YBZM.png",z="/Ascend310/assets/shell-Djjls1KU.png",L="/Ascend310/assets/md5-BvXqGtZ8.png",X="/Ascend310/assets/SDFmt-BndwCMBj.png",q="/Ascend310/assets/fmt-Brmxb9xx.png",W="/Ascend310/assets/warning-lRKtn22s.png",N="/Ascend310/assets/fmtfin-Ctt2AzGg.png",R="/Ascend310/assets/ether1-CPsE7Kxx.png",j="/Ascend310/assets/chooseether-D8INO7jV.png",Y="/Ascend310/assets/dd-DgaN2l3C.png",Q="/Ascend310/assets/val-D47ivIjh.png",V="/Ascend310/assets/finish-vZ35dwQs.png",K="/Ascend310/assets/bootswitch-D5c1QPuh.png",J="/Ascend310/assets/HDMI0-CNVUqjh1.png",Z="/Ascend310/assets/typecp-CgebG7cM.png",$="/Ascend310/assets/beforelogin-DOF2vL8J.png",ss="/Ascend310/assets/logingui-B1kl_SEQ.png",is="/Ascend310/assets/gpio_ttl-DwgbmRm3.png",es="/Ascend310/assets/microusbser-mcTqpHCX.png",as="/Ascend310/assets/ttl-OAyZiAio.png",ts="/Ascend310/assets/putty-DpXy5ykQ.png",ns="/Ascend310/assets/serial-CLprRweS.png",ls="/Ascend310/assets/login-ag-EXYLl.png",ps="/Ascend310/assets/wifiant-Bd0c55Ei.png",rs="/Ascend310/assets/powerindicator-CBAqYlOJ.png",ds="/Ascend310/assets/linuxindicator-WI8tlqG0.png",hs="/Ascend310/assets/gpio-CEzmz9Qe.png",cs="/Ascend310/assets/gpio2-CrdDD474.png",os="/Ascend310/assets/gpio_direction-CSct6pVV.png",gs="/Ascend310/assets/gpio_status-DOQre1L1.png",ms="/Ascend310/assets/spidevices-DqORhQUE.png",ks="/Ascend310/assets/spidev1-BHMsPkiJ.png",us={};function bs(_s,s){return t(),e("div",null,s[0]||(s[0]=[a('<h1 id="案例0-初步使用开发板" tabindex="-1"><a class="header-anchor" href="#案例0-初步使用开发板"><span>案例0：初步使用开发板</span></a></h1><hr><h2 id="昇腾310b开发板介绍" tabindex="-1"><a class="header-anchor" href="#昇腾310b开发板介绍"><span>昇腾310B开发板介绍</span></a></h2><p>OrangePi AIpro(8T)开发板是香橙派联合华为精心打造的高性能AI开发板，采用昇腾AI技术路线，搭载的昇腾310B为4核64位处理器+AI处理器，集成图形处理器，支持8TOPS INT8的AI算力，拥有8GB/16GB LPDDR4X内存，可以外接32GB/64GB/128GB/256GB eMMC模块，支持双4K高清输出。OrangePi AIpro(8T)引用了相当丰富的接口，包括两个HDMI输出、GPIO接口、Type-C电源接口、支持SATA/NVMe SSD 2280的M.2插槽、TF插槽、千兆网口、两个USB3.0、一个USB Type-C 3.0、一个Micro USB（串口打印调试功能）、两个MIPI摄像头、一个MIPI屏等，预留电池接口，可广泛适用于AI边缘计算、深度视觉学习及视频流AI分析、视频图像分析、自然语言处理、智能小车、机械臂、人工智能、无人机、云计算、AR/VR、智能安防、智能家居等领域，覆盖 AIoT各个行业。 OrangePi AIpro(8T)支持Ubuntu、openEuler操作系统，满足大多数AI算法原型验证、推理应用开发的需求。 <img src="'+n+'" alt="产品图"></p><h3 id="开发板详细视图" tabindex="-1"><a class="header-anchor" href="#开发板详细视图"><span>开发板详细视图</span></a></h3><p><img src="'+l+'" alt="正面视图"><img src="'+p+'" alt="背面试图"><img src="'+r+'" alt="正面标注视图"><img src="'+d+'" alt="背面标注视图"><img src="'+h+'" alt="GPIO接口定义"></p><h3 id="开发板硬件规格" tabindex="-1"><a class="header-anchor" href="#开发板硬件规格"><span>开发板硬件规格</span></a></h3><hr><h3 id="所需配件" tabindex="-1"><a class="header-anchor" href="#所需配件"><span>所需配件</span></a></h3><ol><li><p>TF卡 容量最小为32GB，速率为Class10级以上的闪迪品牌的TF卡，如下图所示。建议使用64G及以上的TF卡，以避免在开发过程中出现磁盘空间不足的问题。 <img src="'+c+'" alt="tf卡"></p></li><li><p>TF卡读卡器 用于读写TF卡，刷写系统，建议选择速率为USB3.0以上的，减少系统刷写的等待时间。 <img src="'+o+'" alt="读卡器"></p></li><li><p>HDMI线或HDMI转mini-HDMI线 主要取决于显示器的接口类型该开发板的视频输出接口为标准HDMI接口。 <img src="'+g+'" alt="HDMI"><img src="'+m+'" alt="Mini HDMI"></p></li><li><p>电源 该开发板的电源输入为PD 20V，需要搭配支持PD协议20V挡位的65W电源适配器。 <img src="'+k+'" alt="PD电源"></p></li><li><p>USB接口的鼠标以及键盘 在无远程访问的条件下对开发板进行本地调试。 <img src="'+u+'" alt="鼠标"></p></li><li><p>金属配套外壳 用于保护开发板硬件。 <img src="'+b+'" alt="外壳"></p></li><li><p>12V散热风扇以及散热鳍块 开发板的风扇接口为2pin，输出电压为12v，支持PWM调速。由于该开发板的CPU发热较大，强烈建议安装主动扇热设备。 <img src="'+_+'" alt="风扇"></p></li><li><p>Type-C转USB 3.0转接线（可选） OrangePi AIPro开发板具有一个Type-C接口，协议为USB3.0（不支持USB 2.0），可外接支持USB3.0以上协议的外置设备。 <img src="'+A+'" alt="转接线"></p></li><li><p>M.2接口 2280规格的PCIe Nvme SSD（可选） 开发板的背部设计有M.2接口，可外接一个M.2的SSD作为开发板的系统盘或者存储。 <img src="'+v+'" alt="nvme ssd"></p></li><li><p>M.2接口 2280规格的Sata Ngff SSD（可选） 同样，开发板的M.2接口不仅支持PCIe协议，也支持Sata协议，因此也可以使用Sata协议的SSD。 <img src="'+F+'" alt="ngff ssd"></p></li><li><p>香橙派的eMMC模块（可选） eMMC（嵌入式多媒体卡）是一种集成了闪存和控制器的低成本存储解决方案，主要用于智能手机、平板电脑和低端笔记本电脑等消费电子产品。其读写速度适中（100-400MB/s），比传统机械硬盘快但不及固态硬盘（SSD），具有体积小、功耗低和易于集成的特点。开发板支持使用eMMC模块作为存储，但需要额外购置eMMC模块。 <img src="'+y+'" alt="emmc正面"><img src="'+f+'" alt="emmc背面"></p></li><li><p>USB摄像头模块（可选） 可用于图像识别、视频通话等多方面用途。 <img src="'+I+'" alt="摄像头"></p></li><li><p>网线（可选） 开发板自带有wifi模块可用于连接wifi，若需要更稳定的网络连接，建议使用网线连接。 <img src="'+S+'" alt="网线"></p></li><li><p>树莓派IMX219型号摄像头（MIPI-CSI）（可选） 开发板带有两个MIPI-CSI接口，可以兼容树莓派的MIPI摄像头，无需占用USB接口。 <img src="'+M+'" alt="MIPI-CSI摄像头"></p></li><li><p>树莓派5寸MIPI LCD显示屏（可选） 开发板带有一个MIPI-DSI显示输出接口，可以直接驱动MIPI的显示屏，而无需外接显示器。 <img src="'+C+'" alt="MIPI显示器"></p></li><li><p>Micro USB数据线（可选） 开发板自带了CH343P芯片，将UART转发为Micro USB接口，若需要使用串口对开发板进行调试，则需要使用Micro USB数据线。 <img src="'+D+'" alt="Micro USB数据线"></p></li></ol><h3 id="下载开发板的系统镜像" tabindex="-1"><a class="header-anchor" href="#下载开发板的系统镜像"><span>下载开发板的系统镜像</span></a></h3><p>作为华为生态中重要的一员，开发板不仅支持Ubuntu系统，也支持openEuler系统，但由于开发板自身并无存储，我们在使用开发板的过程中需要使用电脑对TF卡进行系统的刷写，建议使用安装有Windows11 或 Ubuntu22.04以上版本的PC。</p><p>首先，打开香橙派官网的<a href="http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-AIpro.html" target="_blank" rel="noopener noreferrer">技术支持界面</a>。<img src="'+x+'" alt="技术支持页面"></p><p>向下滑动网页，找到官方镜像部分，分为Ubuntu和openEuler两个部分，两个系统都是官方为我们编译完成的，且预装了部分昇腾NPU的应用环境以及软件，非常方便新手用户上手使用。 <img src="'+P+'" alt="官方镜像"></p><h4 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu"><span>Ubuntu</span></a></h4><ol><li>点击下载<img src="'+B+'" alt="下载"></li><li>复制提取码并跳转<img src="'+U+'" alt="跳转"></li><li>打开百度网盘的链接后有一个命名为Ubuntu的文件夹，点开该文件夹<img src="'+T+'" alt="文件夹"></li><li>文件夹中，后缀为.xz的文件是镜像压缩包文件，.sha文件是压缩包的md5校验码文件，用于校验镜像包文件是否完整。</li><li>文件夹中的镜像有两种，一种文件名带有Desktop的，是带有GUI图形化界面的，另一种文件名带有minimal的，是不具有图形化界面的，只有命令行界面。建议新学习的用户使用带有desktop的镜像。 <img src="'+O+'" alt="选择镜像"></li><li>下载后先校验压缩包是否完整，后解压压缩包</li></ol><h4 id="openeuler" tabindex="-1"><a class="header-anchor" href="#openeuler"><span>openEuler</span></a></h4><ol><li>点击下载<img src="'+E+'" alt="下载"></li><li>复制提取码并跳转<img src="'+w+'" alt="跳转"></li><li>打开百度网盘的链接后有一个命名为OpenEuler的文件夹，点开该文件夹<img src="'+G+'" alt="文件夹"></li><li>文件夹中，后缀为.xz的文件是镜像压缩包文件，.sha文件是压缩包的md5校验码文件，用于校验镜像包文件是否完整。</li><li>文件夹中的镜像只有一种，即具有GUI图形化界面的openEuler系统。<img src="'+H+'" alt="OpenEuler"></li><li>下载后先校验压缩包是否完整，后解压压缩包</li></ol><h4 id="使用md5校验下载的文件" tabindex="-1"><a class="header-anchor" href="#使用md5校验下载的文件"><span>使用md5校验下载的文件</span></a></h4><p>在Windows系统下，可以使用<code>certutil -hashfile &lt;filename&gt; md5</code>;在Ubuntu系统下，可以使用<code>md5sum &lt;filename&gt;</code>；在MacOS系统下，可以使用<code>md5 &lt;filename&gt;</code>进行计算，此处以Windows系统为例：在文件夹按住Shift键并单击鼠标右键，选择“在终端（Powershell/命令提示符）中打开”<img src="'+z+'" alt="终端">，然后在打开的窗口中输入<code>certutil -hashfile opiaipro_ubuntu22.04_desktop_aarch64_20241128.img.xz md5</code><img src="'+L+'" alt="md5校验">，将得到的md5值与<code>opiaipro_ubuntu22.04_desktop_aarch64_20241128.img.xz.sha</code>文件进行对比，若一致可进行下一步操作，否则需要重新下载。</p><h3 id="刷写系统到tf卡" tabindex="-1"><a class="header-anchor" href="#刷写系统到tf卡"><span>刷写系统到TF卡</span></a></h3><h4 id="下载并安装必要的工具" tabindex="-1"><a class="header-anchor" href="#下载并安装必要的工具"><span>下载并安装必要的工具</span></a></h4><blockquote><p>下载链接：<a href="http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-AIpro.html" target="_blank" rel="noopener noreferrer">官网</a> <a href="https://pan.baidu.com/s/1Jho73pw91r5GJD2KijY45Q?pwd=3xuz#list/path=%2F" target="_blank" rel="noopener noreferrer">百度网盘</a></p></blockquote><ol><li>SD Card Formatter 这个是TF卡的快速格式化工具，在每次需要刷写系统之前，都必须先对TF卡进行格式化操作，若不格式化在后续的刷写系统过程中有较大概率出错。</li><li>balenaEther 这个是系统镜像的刷写工具，用于刷写img镜像文件进入TF卡。</li></ol><h4 id="格式化tf卡" tabindex="-1"><a class="header-anchor" href="#格式化tf卡"><span>格式化TF卡</span></a></h4><ol><li>将TF卡插入读卡器中，并将读卡器插入电脑</li><li>打开SD Card Formatter软件<img src="'+X+'" alt="TF卡格式化"></li><li>点击右下角Format按键，格式化TF卡<img src="'+q+'" alt="格式化"></li></ol><blockquote><p>警告内容是关于格式化操作会清除TF卡上原有的所有数据，此处选是<img src="'+W+'" alt="warning"></p></blockquote><ol start="4"><li>等待软件格式化完成，并点击确定<img src="'+N+'" alt="格式化完成"></li></ol><h4 id="刷写系统到tf卡-以ubuntu为例" tabindex="-1"><a class="header-anchor" href="#刷写系统到tf卡-以ubuntu为例"><span>刷写系统到TF卡（以Ubuntu为例）</span></a></h4><blockquote><p>此处以刷写Ubuntu为例</p></blockquote><ol><li>打开balenaEther，选择“从文件烧录”<img src="'+R+'" alt="balenaEther"></li><li>选择好要烧录的镜像文件（<strong>.img</strong>格式），再选择目标磁盘为TF卡对应的位置，如图中名称为“SDXC Card”的位置，选中并选择“选定1”。<img src="'+j+'" alt="选择磁盘"></li><li>点击“现在烧录！”，耐心等待烧录完成。<img src="'+Y+'" alt="烧录过程"></li><li>烧录完成后进入校验过程，也请耐心等待。<img src="'+Q+'" alt="校验过程"></li><li>烧录完成后即可关闭程序，并安全弹出TF卡<img src="'+V+'" alt="完毕"></li></ol><h4 id="刷写系统到emmc" tabindex="-1"><a class="header-anchor" href="#刷写系统到emmc"><span>刷写系统到eMMC</span></a></h4><p>由于板上并不自带有eMMC模块，若要想使用需要额外购买香橙派的eMMC模块，此处暂时不列入参考，若需使用，请查阅香橙派的用户手册。</p><h4 id="刷写系统到ssd" tabindex="-1"><a class="header-anchor" href="#刷写系统到ssd"><span>刷写系统到SSD</span></a></h4><p>开发板带有M.2接口，可以使用SSD作为启动设备。但SSD需要自行准备，且根据香橙派的兼容性说明，该开发版仅支持少数品牌的SSD，因此不推荐使用SSD作为系统安装位置。</p><h4 id="调整设备启动方式的拨码开关" tabindex="-1"><a class="header-anchor" href="#调整设备启动方式的拨码开关"><span>调整设备启动方式的拨码开关</span></a></h4><p>开发板支持多种启动方式，包括TF卡、eMMC以及M.2 SSD，当这些存储设备都同时存在时，需要让开发板选定一个存储设备作为启动来源。</p><p><img src="'+K+'" alt="boot开关"></p><p>两个开关都有左、右两种状态，因此共有4种状态，但是目前开发板仅使用3种模式，对应的参数表如下：</p><table><thead><tr><th style="text-align:center;">Boot1开关</th><th style="text-align:center;">Boot2开关</th><th style="text-align:center;">启动设备</th></tr></thead><tbody><tr><td style="text-align:center;">左</td><td style="text-align:center;">左</td><td style="text-align:center;">未使用</td></tr><tr><td style="text-align:center;">右</td><td style="text-align:center;">右</td><td style="text-align:center;">TF卡</td></tr><tr><td style="text-align:center;">左</td><td style="text-align:center;">右</td><td style="text-align:center;">eMMC</td></tr><tr><td style="text-align:center;">右</td><td style="text-align:center;">左</td><td style="text-align:center;">M.2 SSD (Nvme或Ngff)</td></tr></tbody></table><p>切换拨码开关后，必须要将开发板完全断电再重新上电才能使新的启动配置生效，使用RESET按键重启则不会使新的启动配置生效。</p><h3 id="启动开发板-ubuntu" tabindex="-1"><a class="header-anchor" href="#启动开发板-ubuntu"><span>启动开发板（Ubuntu）</span></a></h3><ul><li>图形化界面</li></ul><ol><li>将系统刷写完成的TF卡从读卡器中取出，插入开发板的TF卡插槽中，并确保两个启动开关的位置均在右边，接入HDMI数据线到靠近USB3.0接口的HDMI0接口，然后将Type-C电源线插入开发板最边缘的TYPE-C供电口，等待风扇的声音变小以及屏幕出现系统登录界面。 <img src="'+J+'" alt="HDMI0"><img src="'+Z+'" alt="TYPE-C Power"><img src="'+$+'" alt="登录"></li><li>进入登录界面后，将键盘接入开发板的USB接口中，默认的登录用户名是<code>HwHiAiUser</code>，输入该账户的密码<code>Mind@123</code>,登录进入系统。 <img src="'+ss+'" alt="桌面"></li></ol><blockquote><p>若无法登陆请检查输入的密码是否正确，大小写以及符号是否正确 默认账户表格： | 用户名 | 密码 | | :---: | :---: | | root | Mind@123 | | HwHiAiUser | Mind@123 |</p></blockquote><ul><li>串口界面</li></ul><ol><li>使用USB2TTL模块，与开发板的GPIO口进行连线<img src="'+is+'" alt="开发板串口">，开发板的TX（GPIO8）接入USB2TTL模块的RX接口，开发板的RX（GPIO10）则接入模块的TX接口，并连接好GND接地，在Windows电脑下可以使用PUTTY连接串口。</li><li>使用开发板自带的Micro USB接口进行串口调试，该方法更为方便，只需要一根Micro USB数据线，接入电脑后打开设备管理器查询对应的串口，然后使用PUTTY进行链接即可。<img src="'+es+'" alt="MicroUSB串口"></li></ol><p>以Micro USB接口为例：</p><ol><li>使用Micro USB数据线连接开发板和电脑</li><li>打开电脑的设备管理器，选择端口，寻找开发板对应的串口端口号<img src="'+as+'" alt="端口号"></li><li>打开串口调试软件（PUTTY）<img src="'+ts+'" alt="PUTTY">，将Connection Type选择为<code>Serial</code>，然后在Serial Line处将端口号修改为设备管理器中查到的端口号，如作者此处端口号为<code>COM3</code>，此外，还需要将Speed从9600修改为115200，最后点击Open打开串口。</li><li>等待出现<code>Ubuntu 22.04.3 LTS orangepiaipro ttyAM0</code>字样，输入登录的用户名HwHiAiUser并回车，然后输入密码Mind@123并回车，注意在输入密码的时候屏幕并不会显示任何东西，登陆后的界面如图所示。 <img src="'+ns+'" alt="串口"><img src="'+ls+'" alt="登录成功"></li></ol><h3 id="wifi天线安装指南" tabindex="-1"><a class="header-anchor" href="#wifi天线安装指南"><span>WIFI天线安装指南</span></a></h3><p>开发版的wifi天线如左侧红色矩形框内所示 <img src="'+ps+'" alt="wifiant"> 将其对准开发版的天线接口安装牢固即可，注意不要将天线贴到开发版的背面，也需要注意天线下方的导电胶布也不要接触开发版，否则有可能导致PCB短路烧坏开发版。</p><h3 id="ubuntu-xfce桌面使用说明" tabindex="-1"><a class="header-anchor" href="#ubuntu-xfce桌面使用说明"><span>Ubuntu Xfce桌面使用说明</span></a></h3><p>目前系统仅支持Ubuntu 22.04 - Jammy系统，内核版本为Linux 5.10</p><h4 id="当前版本适配情况" tabindex="-1"><a class="header-anchor" href="#当前版本适配情况"><span>当前版本适配情况</span></a></h4><p>请详见香橙派官方的用户手册，有部分功能仅支持使用官方程序进行测试，无法直接从系统中调用，在使用过程中需注意这些限制。</p><h4 id="板载led灯" tabindex="-1"><a class="header-anchor" href="#板载led灯"><span>板载LED灯</span></a></h4><p>开发版上有两个绿色的LED灯，一个为电源指示灯，另一个为Linux内核指示灯。 <img src="'+rs+'" alt="电源指示灯"><img src="'+ds+`" alt="内核指示灯"> Linux内核指示灯由GPIO4_14控制，默认情况下则在Linux启动后该灯就会点亮，如需要修改该灯的点亮条件，需要修改内核DTS文件并重新编译Linux系统。</p><h4 id="有线网络连接" tabindex="-1"><a class="header-anchor" href="#有线网络连接"><span>有线网络连接</span></a></h4><ol><li>将网线一端连接开发版的网口，另一端连接交换机/路由器</li><li>在Ubuntu系统中打开终端（terminal），输入<code>ip a s eth0</code>，ip地址显示在输出的inet一列</li></ol><h4 id="使用无线网络连接" tabindex="-1"><a class="header-anchor" href="#使用无线网络连接"><span>使用无线网络连接</span></a></h4><ul><li>使用nmcli连接，首先<code>nmcli dev wifi</code>扫描WIFI，然后使用<code>sudo nmcli dev wifi connect wifi_name password wifi_passwd</code>（将wifi_name和wifi_passwd替换为实际的SSID和密码，不支持中文），连接成功后使用<code>ip a s wlan0</code>查看wifi地址。</li><li>使用nmtui连接，在终端输入<code>sudo nmtui</code>后即可使用键盘对图形界面进行操作，包括连接网络、断开网络、设置静态IP地址等。</li></ul><h3 id="hdmi口使用" tabindex="-1"><a class="header-anchor" href="#hdmi口使用"><span>HDMI口使用</span></a></h3><p>开发板有两个HDMI2.0接口，目前只有HDMI0支持显示Linux系统的桌面，当Linux系统的桌面系统关闭时，HDMI0和HDMI1还可以用于NVR二次开发场景输出图片。</p><h4 id="使用hdmi-vdp模式" tabindex="-1"><a class="header-anchor" href="#使用hdmi-vdp模式"><span>使用HDMI VDP模式</span></a></h4><ol><li>将显示器连接至HDMI0接口，登陆进入系统</li><li>打开终端，输入如下命令：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opi_test/hdmi0_pic</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./update_dt.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>等待系统重启后，注意此时HDMI接口不会再有输出，使用远程ssh或者串口登陆系统，输入如下命令：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opt_test/hdmi0_pic</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./test.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以发现显示屏会输出一张图片，若需要使用hdmi1输出，则只需要将上文的hdmi0修改为hdmi1。</p><h4 id="恢复hdmi-drm模式" tabindex="-1"><a class="header-anchor" href="#恢复hdmi-drm模式"><span>恢复HDMI DRM模式</span></a></h4><p>进入终端，输入如下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opi_test/hdmi_desktop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./update_dt.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>等系统重启后即可。</p><h3 id="usb摄像头使用" tabindex="-1"><a class="header-anchor" href="#usb摄像头使用"><span>USB摄像头使用</span></a></h3><p>将USB摄像头插入开发版的USB3.0接口中，然后输入如下命令查询摄像头：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v4l-utils</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v4l2-ctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list-devices</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接着安装fswebcam<code>sudo apt-get install -y fswebcam</code>，就可以使用fswebcam进行拍照。</p><p>或者使用内置的USBCamera测试代码，运行如下命令，获得一张yuv格式的图片：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opi_test/USBCamera</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/video0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用ffplay查看<code>ffplay -pix_fmt yuyv422 -video_size 1280*720 out.yuv</code></p><h3 id="音频使用" tabindex="-1"><a class="header-anchor" href="#音频使用"><span>音频使用</span></a></h3><p>Linux内核没有适配耳机和HDMI等的ALSA音频驱动，此部分驱动还在开发中，目前只能通过音频样例代码来测试耳机、HDMI的音频播放和板载MIC的录音功能。或者自行购买Linux系统免驱的USB外置声卡，经测试可以正常使用。 若想要使用USB音频，需要将自行准备的USB声卡或者USB接口的耳机连接至USB3.0接口，使用<code>arecord -l</code>命令查看录音设备的编号，得到编号后，即可开始测试。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opi_test/USBAudio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plughw:0</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 录制音频</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">over</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 结束录制</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若需要播放音频，则使用<code>ffplay -ar 44100 -ac 2 -f s16le audio.pcm</code></p><p>开发版具有3.5MM的接口，但是如前文所述，目前Linux系统内核并无驱动，使用3.5MM接口播放与录制需要使用指定的测试程序。 播放：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opi_test/audio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./sample_audio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> play</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> qzgy_48k_16_mono_30s.pcm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>录音：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/opi_test/audio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./sample_audio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> capture</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.pcm</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 录音</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./sample_audio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> play</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.pcm</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 播放</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gpio口的引脚顺序" tabindex="-1"><a class="header-anchor" href="#gpio口的引脚顺序"><span>GPIO口的引脚顺序</span></a></h3><p>如图，单号引脚和双号引脚分别在一排。 <img src="`+hs+'" alt="GPIO"><img src="'+cs+`" alt="GPIO2"></p><p>注意事项：</p><ol><li>40pin接口中总共有26个GPIO口，但8号和10号引脚默认是用于调试串口功能的，并且这两个引脚和Micro USB调试串口是连接在一起的，所以这两个引脚请不要设置为GPIO等功能。</li><li>所有的GPIO口的电压都是3.3v。</li><li>40pin接口中27号和28号引脚只有I2C的功能，没有GPIO等其他复用功能，另外这两个引脚的电压默认都为1.8v。</li></ol><h4 id="gpio测试工具" tabindex="-1"><a class="header-anchor" href="#gpio测试工具"><span>GPIO测试工具</span></a></h4><p>目前开发板的系统镜像已经预装了gpio_operate工具，该工具可用于设置GPIO管脚的输入与输出方向，也可将每个GPIO管脚独立的设为0或1。 查阅该工具的帮助：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gpio_operate</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>查询GPIO管脚方向 使用<code>gpio_operate get_direction gpio_group gpio_pin</code>，其中gpio_group 是GPIO口对应的分组，取值在[0,8]之间，gpio_pin则是GPIO口的管脚号，取值[0,31]之间，例如GPIO1_01，获取其方向的代码为<code>gpio_operate get_direction 1 01</code>，得到的结果如图所示，value为0是输入方向，value为1则为输出方向，如此处GPIO1_01的方向为输入方向。 <img src="`+os+'" alt="gpio方向"> 若需要修改GPIO的管脚方向，则使用另一条命令<code>gpio_operate set_direction gpio_group gpio_pin direction</code>，gpio_group、gpio_pin和direction的定义与上文一致，只需要根据需要将gpio口修改为需要的方向即可。 另外还能通过这个工具查询和设置GPIO管脚的电平信号，<code>gpio_operate get_value gpio_group gpio_pin</code>用于查询管脚的状态为高电平（1）亦或是低电平（0），如<code>gpio_operate get_value 1 01</code>，得到的value为1，说明是高电平，若value值是0，则说明是低电平。 <img src="'+gs+'" alt="gpio状态"> 同时，也可以使用<code>gpio_operate set_value gpio_group gpio_pin value</code>来设置默认的管脚电平，注意设置管脚值前，请确保已将GPIO管脚的方向设置为输出！</p><h4 id="spi测试" tabindex="-1"><a class="header-anchor" href="#spi测试"><span>SPI测试</span></a></h4><p>开发板具有SPI功能，且Ubuntu系统默认配置了SPI的Master功能，SPI总线为SPI0，SDO对应的GPIO为19（GPIO2_27），SDI对应的GPIO为21（GPIO2_28），SCLK对应的GPIO为23（GPIO2_25），CS（片选）对应的GPIO为24（GPIO2_26）。 查看ubuntu系统中存在的spi设备<code>ls /dev/spidev*</code><img src="'+ms+'" alt="SPI设备"></p><p>首先测试一下SPI在未连接MISO（SDI）和MOSI（SDO）两个管脚情况下的输出，在终端输入<code>sudo spidev_test -v -D /dev/spidev0.0</code>，得到如下结果 <img src="'+ks+'" alt="spidev结果"> 可以发现TX和RX的结果不尽相同，说明此时开发板已经调用SPI接口的驱动在向外发送数据，但是没收到数据，接下来我们使用杜邦线将SDI和SDO连接，构成一个回环，再次运行上述命令,可以发现TX和RX的数据一致，说明SPI的发送和接收功能正常，可以通过spidev命令调用SPI接口了。</p><h4 id="wiringop" tabindex="-1"><a class="header-anchor" href="#wiringop"><span>wiringOP</span></a></h4><p>这是一个高性能的GPIO</p>',101)]))}const Fs=i(us,[["render",bs],["__file","case0.html.vue"]]),ys=JSON.parse('{"path":"/experiment/case0.html","title":"案例0：初步使用开发板","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"昇腾310B开发板介绍","slug":"昇腾310b开发板介绍","link":"#昇腾310b开发板介绍","children":[{"level":3,"title":"开发板详细视图","slug":"开发板详细视图","link":"#开发板详细视图","children":[]},{"level":3,"title":"开发板硬件规格","slug":"开发板硬件规格","link":"#开发板硬件规格","children":[]},{"level":3,"title":"所需配件","slug":"所需配件","link":"#所需配件","children":[]},{"level":3,"title":"下载开发板的系统镜像","slug":"下载开发板的系统镜像","link":"#下载开发板的系统镜像","children":[]},{"level":3,"title":"刷写系统到TF卡","slug":"刷写系统到tf卡","link":"#刷写系统到tf卡","children":[]},{"level":3,"title":"启动开发板（Ubuntu）","slug":"启动开发板-ubuntu","link":"#启动开发板-ubuntu","children":[]},{"level":3,"title":"WIFI天线安装指南","slug":"wifi天线安装指南","link":"#wifi天线安装指南","children":[]},{"level":3,"title":"Ubuntu Xfce桌面使用说明","slug":"ubuntu-xfce桌面使用说明","link":"#ubuntu-xfce桌面使用说明","children":[]},{"level":3,"title":"HDMI口使用","slug":"hdmi口使用","link":"#hdmi口使用","children":[]},{"level":3,"title":"USB摄像头使用","slug":"usb摄像头使用","link":"#usb摄像头使用","children":[]},{"level":3,"title":"音频使用","slug":"音频使用","link":"#音频使用","children":[]},{"level":3,"title":"GPIO口的引脚顺序","slug":"gpio口的引脚顺序","link":"#gpio口的引脚顺序","children":[]}]}],"git":{"createdTime":1752741756000,"updatedTime":1758460961000,"contributors":[{"name":"zhouxzh","username":"zhouxzh","email":"zhouxzh@gdut.edu.cn","commits":2,"url":"https://github.com/zhouxzh"},{"name":"ryan.he","username":"ryan.he","email":"hhc92611@gmail.com","commits":1,"url":"https://github.com/ryan.he"},{"name":"idsefa","username":"idsefa","email":"hhc92611@gmail.com","commits":3,"url":"https://github.com/idsefa"},{"name":"Xianzhong Zhou","username":"Xianzhong Zhou","email":"zhouxzh@gdut.edu.cn","commits":4,"url":"https://github.com/Xianzhong Zhou"}]},"readingTime":{"minutes":16.55,"words":4966},"filePathRelative":"experiment/case0.md","localizedDate":"2025年7月17日"}');export{Fs as comp,ys as data};
