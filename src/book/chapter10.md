---
title: "第10讲：导读与准备（Part 0 强化版）"
author: [周贤中]
date: 2025-09-04
subject: "Markdown"
keywords: [导读, 学习路径, 环境准备, 约定, 上手指南]
lang: zh-cn
---

## 章节总览
本章提供“鸟瞰 + 上手 + 约定 + 协作”四个维度：帮助读者在开始代码与实验前，建立清晰地图、完成环境自检、理解术语规范，并加入协作迭代。阅读后应能：A) 明确个人学习路径；B) 快速完成最小可行部署；C) 识别后续章节间的依赖关系。

## 10.1 全书主线结构
技术主线：硬件与环境 (1) → 软件栈与转换 (2) → 边缘系统视角 (3) → 典型部署实践 (4) → 性能与算子优化 (5) → 高可用工程体系 (6) → 方法论与交付 (7) → 综合案例 (8) → 工具与附录 (9)。
知识图谱建议：
```
硬件/板卡 → CANN 组件 → 模型转换 → 推理编程 → 多模型流水线 → 性能调优 → 系统可靠性 → 交付方法论 → 案例复现
```

## 10.2 读者路径矩阵
| 角色 | 起步路径 | 可跳过 | 深挖章节 | 目标里程碑 |
| ---- | -------- | ------ | -------- | ---------- |
| 零基础 | 1 → 2 → 4 | 5 深度优化细节 | 8 案例 | 跑通首个端到端推理 |
| 嵌入式 | 1 → 2 → 5 → 6 | 7 方法论部分 | 5/6 性能与可靠性 | 优化资源占比 |
| AI 应用 | 2 → 4 → 7 → 8 | 1 硬件细节 | 4/8 部署差异 | 多任务流水线 |
| 技术负责人 | 0 → 3 → 6 → 7 | 具体算子实现 | 7 评测体系 | 制定团队标准 |

## 10.3 硬件准备与兼容性
| 组件 | 推荐 | 说明 | 检查点 |
| ---- | ---- | ---- | ------ |
| 开发板 | OrangePi AIpro 310B | 标准平台 | npu-smi 识别型号 |
| 存储 | TF 64G+ / SSD | 加速 I/O | iostat 延迟 <10ms |
| 散热 | 风扇+鳍片 | 长时间稳定 | 温度 < 85°C |
| 摄像头 | USB UVC / MIPI | 即插即用 | v4l2-ctl 列设备 |
| 网络 | 千兆以太网 | 低抖动 | ping 丢包率 ≈0 |
| 电源 | PD 65W | 稳定供电 | 无随机重启 |

准备完成后记录 `hardware_inventory.md`：型号、序列号、固件版本、功耗模式。

## 10.4 软件与工具栈细化
| 层级 | 工具/组件 | 说明 |
| ---- | -------- | ---- |
| OS | Ubuntu 22.04 / openEuler | 官方验证环境 |
| 驱动/固件 | 对应 CANN 版本 | 版本矩阵对齐 |
| CANN | Toolkit + Runtime | 提供 atc/acl/profiling |
| Python | 3.10+ | 脚本与评测 |
| 依赖 | numpy/onnx/onnxruntime/opencv | 模型与预处理 |
| 调试 | npu-smi/Profiler/日志系统 | 性能与稳定性分析 |

建议创建 `requirements.txt` 并使用 venv 或 Conda 隔离。

## 10.5 仓库目录与命名约定
| 目录 | 内容 | 约定 |
| ---- | ---- | ---- |
| src/book | 文本章节 | 章节号前缀固定 |
| experiments | 案例 | caseX 模式 |
| models | 原始/导出中间模型 | 按模型名/版本 |
| scripts | 通用脚本 | 跨平台 `.sh/.ps1` |
| tools | 辅助分析脚本 | 单一功能命令化 |
| docs | 生成 PDF / 图 | 不放大模型文件 |
| benchmarks | 性能记录 | 时间戳 + commit |

命名：`<model>_<precision>_<shape>.om`，例如 `yolov5s_fp16_1x3x640x640.om`。

## 10.6 最小可行环境验证 (MVE)
执行脚本 `scripts/verify_env.sh`（建议添加）：
1. `npu-smi info`：输出芯片与状态；
2. `atc --version`：版本号记录；
3. 运行随机张量推理（内置简单 OM 或最小网络）验证 ACL API；
4. Profiling 采集一次，生成 timeline 文件；
5. 记录结果写入 `env_report.json`。

判定：如某步骤失败阻断后续章节学习。

## 10.7 全局术语与约定
| 术语 | 约定 | 说明 |
| ---- | ---- | ---- |
| FPS | frames/second | 统计处理输出帧数 |
| Latency | ms | 端到端完成时间 |
| Pxx | 分位数 | P95/P99 评估抖动 |
| Pipeline | 阶段组 | 多阶段并行结构 |
| Signature | 模型签名 | I/O 名称与形状/格式 json |
| Baseline | 初始基线 | 第一版性能/精度记录 |

所有时间单位默认 ms；数据大小默认字节（显式写 MB/GiB 时需指出换算基数）。

## 10.8 协作工作流与质量闸门
工作流：Issue（需求/缺陷）→ 分支 `feat|fix/<topic>` → 提交（含描述）→ PR → 自动测试（Lint+精度/性能轻测）→ Review → Merge。
质量闸门：
| 闸门 | 说明 | 未通过处理 |
| ---- | ---- | -------- |
| Lint | 代码/文档格式 | 修复后再提交 |
| Spell | 关键术语拼写 | 更正 |
| Signature 验证 | 模型签名一致 | 拒绝合并 |
| 基线回归 | 性能/精度差异超阈值 | 标注需说明 |

PR 模板字段：Motivation / Changes / Test / Risk / Rollback Plan。

## 10.9 学习与实践建议
1. 完成前 3 章后立即挑选一个轻量模型跑通部署（建立正反馈）。
2. 每章输出“总结卡片”：知识点 → 应用场景 → 潜在风险。
3. 建议建立个人实验日志：参数、结果、疑问与下一步假设。
4. 失败样本收集：创建 `failure_cases/` 目录存储误检/漏检图像用于持续改进。

## 10.10 常见初学误区与规避
| 误区 | 结果 | 规避 |
| ---- | ---- | ---- |
| 直接优化无基线 | 无从评估收益 | 先建立 baseline |
| 混用不同预处理 | 精度随机波动 | 抽象统一函数 |
| 缺少签名文件 | 部署时出错 | 每次转换生成签名 |
| 未记录环境版本 | 难以复现 | env_report.json |
| 长日志未切割 | 磁盘占满 | 配置滚动策略 |

## 10.11 章节小结
通过环境、目录、术语、协作流程的标准化，后续学习聚焦问题本身，而不是环境与沟通摩擦。建议读者在继续前先完成“最小可行环境验证”并记录结果，以便后续调试时快速排除环境因素。

## 10.12 实践任务
1. 撰写 `hardware_inventory.md` 与 `env_report.json`（可手动草拟）。
2. 建立 `requirements.txt` 并安装依赖，记录安装耗时。
3. 创建一个最小随机张量 OM 推理脚本并输出结果摘要。
4. 制定个人 4 周学习计划（章节→目标→产出）。

